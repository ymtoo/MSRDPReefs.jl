var documenterSearchIndex = {"docs":
[{"location":"clustutils.html#Utilities-for-clustering","page":"Utilities for clustering","title":"Utilities for clustering","text":"","category":"section"},{"location":"clustutils.html","page":"Utilities for clustering","title":"Utilities for clustering","text":"Modules = [MSRDPReefs]\nPages   = [\"clustutils.jl\"]","category":"page"},{"location":"clustutils.html#MSRDPReefs.specgram_scatter-Union{Tuple{DT}, Tuple{T}, Tuple{AbstractArray{T,1},AbstractArray{T,1},AbstractArray{DT,1}}} where DT<:(AbstractArray{#s7,1} where #s7<:Real) where T<:Real","page":"Utilities for clustering","title":"MSRDPReefs.specgram_scatter","text":"specgram_scatter(x, y, data; fs=1, nfft=256, noverlap=128, kwargs...)\n\nPlot a scatter plot with each point is a spectrogram of a signal from data.\n\nExamples:\n\njulia> using MSRDPReefs\n\njulia> using AbstractPlotting, GLMakie\n\njulia> data = [randn(4800) for i ∈ 1:20];\n\njulia> X = randn(2, length(data));\n\njulia> specgram_scatter(X[1,:], X[2,:], data; fs=9600)\nGLMakie.Screen(...)\n\n\n\n\n\n","category":"method"},{"location":"clustutils.html#MSRDPReefs.specgram_scatter-Union{Tuple{DT}, Tuple{T}, Tuple{AbstractArray{T,1},AbstractArray{T,1},AbstractArray{DT,1}}} where DT<:AbstractString where T<:Real","page":"Utilities for clustering","title":"MSRDPReefs.specgram_scatter","text":"specgram_scatter(x, y, data; fs=1, nfft=256, noverlap=128, kwargs...)\n\nPlot a scatter plot with each point is a spectrogram of a WAV file from data.\n\nExamples:\n\njulia> using MSRDPReefs, WAV\n\njulia> using AbstractPlotting, GLMakie\n\njulia> root = mktempdir();\n\njulia> [wavwrite(randn(4800), joinpath(root, string(i)*\".wav\"); Fs=9600) for i ∈ 1:20];\n\njulia> wavpaths = readdir(root, join=true);\n\njulia> X = randn(2, length(wavpaths));\n\njulia> specgram_scatter(X[1,:], X[2,:], wavpaths; fs=9600)\nGLMakie.Screen(...)\n\n\n\n\n\n","category":"method"},{"location":"clustutils.html#MSRDPReefs.visualizeclusters-NTuple{4,Any}","page":"Utilities for clustering","title":"MSRDPReefs.visualizeclusters","text":"visualizeclusters(wavpaths, clusterindices, outlierindices, ndisplayperclass)\n\nDisplay spectrograms of sounds in wavpaths according to the clustering result denoted by clusterindices and outlierindices. ndisplayperclass defines number of spectrogram per class to be displayed. The axes are blank if ndisplayperclass is larger than cluster size. When a mouse is hovering at thecenter of a spectrogram, the respective sound is played.\n\nExample:\n\njulia> using MSRDPReefs, WAV\n\njulia> using AbstractPlotting, GLMakie\n\njulia> ndata, nclass = 100, 3;\n\njulia> root = mktempdir();\n\njulia> data = randn(4800, ndata);\n\njulia> [wavwrite(col, joinpath(root, string(i)*\".wav\"); Fs=9600) for (i, col) ∈ \n        enumerate(eachcol(data))];\n\njulia> wavpaths = readdir(root, join=true);\n\njulia> clusterindices, outlierindices = [1:9, 10:70, 71:91], 92:ndata;\n\njulia> visualizeclusters(wavpaths, clusterindices, outlierindices, 10)\nGLMakie.Screen(...)\n\n\n\n\n\n","category":"method"},{"location":"clustutils.html#MSRDPReefs.visualizeclusters-Tuple{Any,Any,Any}","page":"Utilities for clustering","title":"MSRDPReefs.visualizeclusters","text":"visualizeclusters(wavpaths, res, ndisplayperclass)\n\nDisplay spectrograms of sounds in wavpaths according to the clustering result res. ndisplayperclass defines number of spectrogram per class to be displayed. The axes are blank if  ndisplayperclass is larger than cluster size. When a mouse is hovering at thecenter of a spectrogram, the respective sound is played.\n\nExamples:\n\njulia> using Clustering, MSRDPReefs, WAV\n\njulia> using AbstractPlotting, GLMakie\n\njulia> ndata, nclass = 100, 3;\n\njulia> root = mktempdir();\n\njulia> data = randn(4800, ndata);\n\njulia> [wavwrite(col, joinpath(root, string(i)*\".wav\"); Fs=9600) for (i, col) ∈ \n        enumerate(eachcol(data))];\n\njulia> wavpaths = readdir(root, join=true);\n\njulia> res = kmeans(data, nclass);\n\njulia> visualizeclusters(wavpaths, res, 10)\nGLMakie.Screen(...)\n\n\n\n\n\n","category":"method"},{"location":"data.html#Data-loading","page":"Data loading","title":"Data loading","text":"","category":"section"},{"location":"data.html","page":"Data loading","title":"Data loading","text":"Modules = [MSRDPReefs]\nPages   = [\"data.jl\"]","category":"page"},{"location":"data.html#MSRDPReefs.SITEDTRANGES","page":"Data loading","title":"MSRDPReefs.SITEDTRANGES","text":"Default datetime ranges for all the sites.\n\nExample:\n\njulia> SITEDTRANGES\nDict{String,Array{Tuple{Dates.DateTime,Dates.DateTime},1}} with 10 entries:\n  \"TPT\"        => [(DateTime(\"2019-11-22T11:30:00\"), DateTime(\"2019-12-31T00:00:00\")), (DateTime(\"202…\n  \"RL-W\"       => [(DateTime(\"2019-06-21T13:00:00\"), DateTime(\"2019-07-15T11:00:00\")), (DateTime(\"202…\n  \"Semakau-SW\" => [(DateTime(\"2019-10-11T14:00:00\"), DateTime(\"2019-10-17T03:00:00\")), (DateTime(\"202…\n  \"SL-SE\"      => [(DateTime(\"2019-10-11T12:00:00\"), DateTime(\"2019-10-25T00:00:00\")), (DateTime(\"202…\n  \"Seringat\"   => [(DateTime(\"2019-10-11T11:00:00\"), DateTime(\"2019-11-08T00:00:00\")), (DateTime(\"202…\n  \"Kusu-NE\"    => [(DateTime(\"2019-09-11T11:00:00\"), DateTime(\"2019-10-11T10:30:00\")), (DateTime(\"202…\n  \"Hantu-W\"    => [(DateTime(\"2019-09-11T13:00:00\"), DateTime(\"2019-10-11T12:00:00\")), (DateTime(\"202…\n  \"Jong-S\"     => [(DateTime(\"2019-09-11T12:30:00\"), DateTime(\"2019-10-11T12:00:00\")), (DateTime(\"202…\n  \"Semakau-NW\" => [(DateTime(\"2020-01-08T13:30:00\"), DateTime(\"2020-02-16T00:00:00\")), (DateTime(\"202…\n  \"SD-NW\"      => [(DateTime(\"2019-11-22T14:00:00\"), DateTime(\"2019-12-02T11:30:00\")), (DateTime(\"202…\n\n\n\n\n\n","category":"constant"},{"location":"data.html#MSRDPReefs._metadata","page":"Data loading","title":"MSRDPReefs._metadata","text":"_metadata(path, \n          dtranges=SITEDTRANGES[split(path, \"/\")[end]], \n          divinglogpath::AbstractString=joinpath(path, \"../logs/diving-log.csv\")\n\nGet metadata in DataFrame of data collected at a particular site.\n\nDatetime\nSite\nSensitivity\nGain\nWavpath\nBattery\nDepth\nTemperature\nRed light\nBlue light\nGreen light \nDiver\n\nExample:\n\njulia> df = MSRDPReefs._metadata(\"/home/arl/Data/reefwatch/recordings/Hantu-W\");\n\njulia> first(df, 5)\n5×13 DataFrame\n│ Row │ Datetime            │ Site    │ Sensitivity │ Gain    │ Wavpath                                                                         │ Battery  │ Depth    │ Temperature │ Redlight │ Greenlight │ Bluelight │ Moonphase │ Diver │\n│     │ Dates.DateTime      │ String  │ Float64     │ Float64 │ String                                                                          │ Float64? │ Float64? │ Float64?    │ Float64? │ Float64?   │ Float64?  │ Int64     │ Bool  │\n├─────┼─────────────────────┼─────────┼─────────────┼─────────┼─────────────────────────────────────────────────────────────────────────────────┼──────────┼──────────┼─────────────┼──────────┼────────────┼───────────┼───────────┼───────┤\n│ 1   │ 2019-09-11T13:02:08 │ Hantu-W │ -179.8      │ 16.77   │ /home/arl/Data/reefwatch/recordings/Hantu-W/2019-09/2019-09/20190911T130208.wav │ 4.31     │ 2.61     │ 30.3        │ 6303.0   │ 10794.0    │ 6907.0    │ 5         │ 0     │\n│ 2   │ 2019-09-11T13:07:07 │ Hantu-W │ -179.8      │ 16.77   │ /home/arl/Data/reefwatch/recordings/Hantu-W/2019-09/2019-09/20190911T130707.wav │ 4.3      │ 2.6      │ 30.28       │ 6911.0   │ 10755.0    │ 7262.0    │ 5         │ 0     │\n│ 3   │ 2019-09-11T13:12:07 │ Hantu-W │ -179.8      │ 16.77   │ /home/arl/Data/reefwatch/recordings/Hantu-W/2019-09/2019-09/20190911T131207.wav │ 4.3      │ 2.56     │ 30.21       │ 6407.0   │ 10623.0    │ 6929.0    │ 5         │ 0     │\n│ 4   │ 2019-09-11T13:17:07 │ Hantu-W │ -179.8      │ 16.77   │ /home/arl/Data/reefwatch/recordings/Hantu-W/2019-09/2019-09/20190911T131707.wav │ 4.28     │ 2.54     │ 30.22       │ 6008.0   │ 10385.0    │ 6814.0    │ 5         │ 0     │\n│ 5   │ 2019-09-11T13:22:07 │ Hantu-W │ -179.8      │ 16.77   │ /home/arl/Data/reefwatch/recordings/Hantu-W/2019-09/2019-09/20190911T132207.wav │ 4.28     │ 2.51     │ 30.23       │ 6227.0   │ 10614.0    │ 6899.0    │ 5         │ 0     │\n\n\n\n\n\n","category":"function"},{"location":"data.html#MSRDPReefs.datacollectionprogress-Tuple{AbstractArray{String,1}}","page":"Data loading","title":"MSRDPReefs.datacollectionprogress","text":"datacollectionprogress(paths)\n\nShow the data collection progress in percentage given multipe parent paths.  100 percent equals to one month of data.\n\nExamples:\n\njulia> datacollectionprogress([\"/home/arl/Data/reefwatch/recordings/Hantu-W\",\n\"/home/arl/Data/reefwatch/recordings/RL-W\"])\n2×7 DataFrame\n│ Row │ Site    │ D1 (%)  │ D2 (%)  │ D3 (%)  │ D4 (%)  │ D5 (%)  │ D6 (%)  │\n│     │ String  │ Real?   │ Real?   │ Real?   │ Real?   │ Real?   │ Real?   │\n├─────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤\n│ 1   │ Hantu-W │ 100.788 │ 128.408 │ 77.8376 │ 103.189 │ missing │ missing │\n│ 2   │ RL-W    │ 83.6276 │ 128.501 │ 116.384 │ missing │ missing │ missing │\n\n\n\n\n\n","category":"method"},{"location":"data.html#MSRDPReefs.datacollectionprogress-Tuple{AbstractString}","page":"Data loading","title":"MSRDPReefs.datacollectionprogress","text":"datacollectionprogress(rootpath)\n\nShow the data collection progress in percentage given a root path. 100 percent equals to one month of data.\n\nExamples:\n\njulia> datacollectionprogress(\"/home/arl/Data/reefwatch/recordings\")\n10×7 DataFrame\n│ Row │ Site       │ D1 (%)  │ D2 (%)  │ D3 (%)  │ D4 (%)  │ D5 (%)  │ D6 (%)  │\n│     │ String     │ Real?   │ Real?   │ Real?   │ Real?   │ Real?   │ Real?   │\n├─────┼────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤\n│ 1   │ Hantu-W    │ 100.788 │ 128.408 │ 77.8376 │ 103.189 │ missing │ missing │\n│ 2   │ Jong-S     │ 100.811 │ 116.446 │ 103.188 │ missing │ missing │ missing │\n│ 3   │ Kusu-NE    │ 100.452 │ 116.518 │ missing │ missing │ missing │ missing │\n│ 4   │ RL-W       │ 83.6276 │ 128.501 │ 116.384 │ missing │ missing │ missing │\n│ 5   │ SD-NW      │ 33.1604 │ 44.6388 │ 103.184 │ missing │ missing │ missing │\n│ 6   │ SL-SE      │ 44.5767 │ 103.188 │ missing │ missing │ missing │ missing │\n│ 7   │ Semakau-NW │ 128.225 │ 116.374 │ missing │ missing │ missing │ missing │\n│ 8   │ Semakau-SW │ 18.9137 │ 4.374   │ missing │ missing │ missing │ missing │\n│ 9   │ Seringat   │ 90.5111 │ 51.5231 │ 106.451 │ missing │ missing │ missing │\n│ 10  │ TPT        │ 128.354 │ 25.6559 │ 106.307 │ missing │ missing │ missing │\n\n\n\n\n\n","category":"method"},{"location":"data.html#MSRDPReefs.getlogpaths-Tuple{AbstractString,AbstractArray{Tuple{Dates.DateTime,Dates.DateTime},1}}","page":"Data loading","title":"MSRDPReefs.getlogpaths","text":"getlogpaths(path, dtranges)\n\nGet paths of all the log files in parent path path\n\n\n\n\n\n","category":"method"},{"location":"data.html#MSRDPReefs.getpaths-Tuple{AbstractString}","page":"Data loading","title":"MSRDPReefs.getpaths","text":"getpaths(rootpath)\n\nGet parent paths. The output is a 1-D array containing paths for data  (acoustic and environmental) collected at all the sites.\n\n\n\n\n\n","category":"method"},{"location":"data.html#MSRDPReefs.metadata","page":"Data loading","title":"MSRDPReefs.metadata","text":"metadata(rootpath, dtrangesdict=SITEDTRANGES)\n\nGet metadata in DataFrame of data collected at all the sites.\n\nDatetime\nSite\nSensitivity\nGain\nWavpath\nBattery\nDepth\nTemperature\nRed light\nBlue light\nGreen light \nDiver\n\nExample:\n\njulia> df = metadata(\"/home/arl/Data/reefwatch/recordings\");\n\njulia> first(df, 5)\n5×13 DataFrame\n│ Row │ Datetime            │ Site    │ Sensitivity │ Gain    │ Wavpath                                                                         │ Battery  │ Depth    │ Temperature │ Redlight │ Greenlight │ Bluelight │ Moonphase │ Diver │\n│     │ Dates.DateTime      │ String  │ Float64     │ Float64 │ String                                                                          │ Float64? │ Float64? │ Float64?    │ Float64? │ Float64?   │ Float64?  │ Int64     │ Bool  │\n├─────┼─────────────────────┼─────────┼─────────────┼─────────┼─────────────────────────────────────────────────────────────────────────────────┼──────────┼──────────┼─────────────┼──────────┼────────────┼───────────┼───────────┼───────┤\n│ 1   │ 2019-09-11T13:02:08 │ Hantu-W │ -179.8      │ 16.77   │ /home/arl/Data/reefwatch/recordings/Hantu-W/2019-09/2019-09/20190911T130208.wav │ 4.31     │ 2.61     │ 30.3        │ 6303.0   │ 10794.0    │ 6907.0    │ 5         │ 0     │\n│ 2   │ 2019-09-11T13:07:07 │ Hantu-W │ -179.8      │ 16.77   │ /home/arl/Data/reefwatch/recordings/Hantu-W/2019-09/2019-09/20190911T130707.wav │ 4.3      │ 2.6      │ 30.28       │ 6911.0   │ 10755.0    │ 7262.0    │ 5         │ 0     │\n│ 3   │ 2019-09-11T13:12:07 │ Hantu-W │ -179.8      │ 16.77   │ /home/arl/Data/reefwatch/recordings/Hantu-W/2019-09/2019-09/20190911T131207.wav │ 4.3      │ 2.56     │ 30.21       │ 6407.0   │ 10623.0    │ 6929.0    │ 5         │ 0     │\n│ 4   │ 2019-09-11T13:17:07 │ Hantu-W │ -179.8      │ 16.77   │ /home/arl/Data/reefwatch/recordings/Hantu-W/2019-09/2019-09/20190911T131707.wav │ 4.28     │ 2.54     │ 30.22       │ 6008.0   │ 10385.0    │ 6814.0    │ 5         │ 0     │\n│ 5   │ 2019-09-11T13:22:07 │ Hantu-W │ -179.8      │ 16.77   │ /home/arl/Data/reefwatch/recordings/Hantu-W/2019-09/2019-09/20190911T132207.wav │ 4.28     │ 2.51     │ 30.23       │ 6227.0   │ 10614.0    │ 6899.0    │ 5         │ 0     │\n\njulia> unique(df.Site)\n10-element Array{String,1}:\n \"Hantu-W\"\n \"Jong-S\"\n \"Kusu-NE\"\n \"RL-W\"\n \"SD-NW\"\n \"SL-SE\"\n \"Semakau-NW\"\n \"Semakau-SW\"\n \"Seringat\"\n \"TPT\"\n\n\n\n\n\n","category":"function"},{"location":"data.html#MSRDPReefs.metadata-2","page":"Data loading","title":"MSRDPReefs.metadata","text":"metadata(paths, dtrangesdict=SITEDTRANGES)\n\nGet metadata in DataFrame of data collected at multiple sites. \n\nDatetime\nSite\nSensitivity\nGain\nWavpath\nBattery\nDepth\nTemperature\nRed light\nBlue light\nGreen light \nDiver\n\nExample:\n\njulia> df = metadata([\"/home/arl/Data/reefwatch/recordings/Hantu-W\",\"/home/arl/Data/reefwatch/recordings/RL-W\"]);\n\njulia> first(df, 5)\n5×13 DataFrame\n│ Row │ Datetime            │ Site    │ Sensitivity │ Gain    │ Wavpath                                                                         │ Battery  │ Depth    │ Temperature │ Redlight │ Greenlight │ Bluelight │ Moonphase │ Diver │\n│     │ Dates.DateTime      │ String  │ Float64     │ Float64 │ String                                                                          │ Float64? │ Float64? │ Float64?    │ Float64? │ Float64?   │ Float64?  │ Int64     │ Bool  │\n├─────┼─────────────────────┼─────────┼─────────────┼─────────┼─────────────────────────────────────────────────────────────────────────────────┼──────────┼──────────┼─────────────┼──────────┼────────────┼───────────┼───────────┼───────┤\n│ 1   │ 2019-09-11T13:02:08 │ Hantu-W │ -179.8      │ 16.77   │ /home/arl/Data/reefwatch/recordings/Hantu-W/2019-09/2019-09/20190911T130208.wav │ 4.31     │ 2.61     │ 30.3        │ 6303.0   │ 10794.0    │ 6907.0    │ 5         │ 0     │\n│ 2   │ 2019-09-11T13:07:07 │ Hantu-W │ -179.8      │ 16.77   │ /home/arl/Data/reefwatch/recordings/Hantu-W/2019-09/2019-09/20190911T130707.wav │ 4.3      │ 2.6      │ 30.28       │ 6911.0   │ 10755.0    │ 7262.0    │ 5         │ 0     │\n│ 3   │ 2019-09-11T13:12:07 │ Hantu-W │ -179.8      │ 16.77   │ /home/arl/Data/reefwatch/recordings/Hantu-W/2019-09/2019-09/20190911T131207.wav │ 4.3      │ 2.56     │ 30.21       │ 6407.0   │ 10623.0    │ 6929.0    │ 5         │ 0     │\n│ 4   │ 2019-09-11T13:17:07 │ Hantu-W │ -179.8      │ 16.77   │ /home/arl/Data/reefwatch/recordings/Hantu-W/2019-09/2019-09/20190911T131707.wav │ 4.28     │ 2.54     │ 30.22       │ 6008.0   │ 10385.0    │ 6814.0    │ 5         │ 0     │\n│ 5   │ 2019-09-11T13:22:07 │ Hantu-W │ -179.8      │ 16.77   │ /home/arl/Data/reefwatch/recordings/Hantu-W/2019-09/2019-09/20190911T132207.wav │ 4.28     │ 2.51     │ 30.23       │ 6227.0   │ 10614.0    │ 6899.0    │ 5         │ 0     │\n\njulia> last(df, 5)\n5×13 DataFrame\n│ Row │ Datetime            │ Site   │ Sensitivity │ Gain    │ Wavpath                                                                      │ Battery  │ Depth    │ Temperature │ Redlight │ Greenlight │ Bluelight │ Moonphase │ Diver │\n│     │ Dates.DateTime      │ String │ Float64     │ Float64 │ String                                                                       │ Float64? │ Float64? │ Float64?    │ Float64? │ Float64?   │ Float64?  │ Int64     │ Bool  │\n├─────┼─────────────────────┼────────┼─────────────┼─────────┼──────────────────────────────────────────────────────────────────────────────┼──────────┼──────────┼─────────────┼──────────┼────────────┼───────────┼───────────┼───────┤\n│ 1   │ 2020-09-11T08:39:15 │ RL-W   │ -179.9      │ 16.77   │ /home/arl/Data/reefwatch/recordings/RL-W/2020-08/2020-09/20200911T083915.wav │ 3.76     │ 2.43     │ 29.64       │ 282.0    │ 509.0      │ 283.0     │ 8         │ 0     │\n│ 2   │ 2020-09-11T08:44:16 │ RL-W   │ -179.9      │ 16.77   │ /home/arl/Data/reefwatch/recordings/RL-W/2020-08/2020-09/20200911T084416.wav │ 3.77     │ 2.42     │ 29.66       │ 291.0    │ 527.0      │ 293.0     │ 8         │ 0     │\n│ 3   │ 2020-09-11T08:49:17 │ RL-W   │ -179.9      │ 16.77   │ /home/arl/Data/reefwatch/recordings/RL-W/2020-08/2020-09/20200911T084917.wav │ 3.77     │ 2.41     │ 29.65       │ 297.0    │ 548.0      │ 310.0     │ 8         │ 0     │\n│ 4   │ 2020-09-11T08:54:18 │ RL-W   │ -179.9      │ 16.77   │ /home/arl/Data/reefwatch/recordings/RL-W/2020-08/2020-09/20200911T085418.wav │ 3.78     │ 2.42     │ 29.65       │ 322.0    │ 594.0      │ 331.0     │ 8         │ 0     │\n│ 5   │ 2020-09-11T08:59:19 │ RL-W   │ -179.9      │ 16.77   │ /home/arl/Data/reefwatch/recordings/RL-W/2020-08/2020-09/20200911T085919.wav │ 3.79     │ 2.39     │ 29.62       │ 342.0    │ 634.0      │ 352.0     │ 8         │ 0     │\n\n\n\n\n\n","category":"function"},{"location":"data.html#MSRDPReefs.revisedf!-NTuple{5,Any}","page":"Data loading","title":"MSRDPReefs.revisedf!","text":"revisedf!(df, logpath, dtrange, acousticsensor)\n\nModify the dataframe df by adding Datetime, Site, Sensitivity, Gain, Wawpath, Moonphase, Diver columns,  combining Red, Green and Blue into RGB(Red, Green, Blue), renaming the columns and removing rows which  are not in the datetime range.\n\n\n\n\n\n","category":"method"},{"location":"index.html#MSRDPReefs.jl","page":"Home","title":"MSRDPReefs.jl","text":"","category":"section"},{"location":"index.html#Tools-for-working-with-coral-reef-datasets","page":"Home","title":"Tools for working with coral reef datasets","text":"","category":"section"},{"location":"index.html","page":"Home","title":"Home","text":"CurrentModule = MSRDPReefs","category":"page"},{"location":"index.html","page":"Home","title":"Home","text":"This package provides utility functions to load and analyze data collected at coral reef sites in Singapore waters.","category":"page"},{"location":"index.html#APIs","page":"Home","title":"APIs","text":"","category":"section"},{"location":"index.html","page":"Home","title":"Home","text":"Data loading\nUtilities for clustering","category":"page"}]
}
